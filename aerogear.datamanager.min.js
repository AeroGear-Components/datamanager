/*! AeroGear JavaScript Library - v2.0.0-beta - 2014-10-08
* https://github.com/aerogear/aerogear-js
* JBoss, Home of Professional Open Source
* Copyright Red Hat, Inc., and individual contributors
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
* http://www.apache.org/licenses/LICENSE-2.0
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(e,t){this.AeroGear={},AeroGear.Core=function(){if(this instanceof AeroGear.Core)throw"Invalid instantiation of base class AeroGear.Core";this.add=function(e){var t,r,a=this[this.collectionName]||{};if(this[this.collectionName]=a,!e)return this;if("string"==typeof e)a[e]=AeroGear[this.lib].adapters[this.type](e,this.config);else if(Array.isArray(e))for(t=0;e.length>t;t++)r=e[t],"string"==typeof r?a[r]=AeroGear[this.lib].adapters[this.type](r,this.config):r.name&&(r.settings=AeroGear.extend(r.settings||{},this.config),a[r.name]=AeroGear[this.lib].adapters[r.type||this.type](r.name,r.settings));else{if(!e.name)return this;e.settings=AeroGear.extend(e.settings||{},this.config),a[e.name]=AeroGear[this.lib].adapters[e.type||this.type](e.name,e.settings)}return this[this.collectionName]=a,this},this.remove=function(e){var t,r,a=this[this.collectionName]||{};if("string"==typeof e)delete a[e];else if(Array.isArray(e))for(t=0;e.length>t;t++)r=e[t],"string"==typeof r?delete a[r]:delete a[r.name];else e&&delete a[e.name];return this[this.collectionName]=a,this}},AeroGear.extend=function(){var e,t,r,a=arguments[0];for(t=1;arguments.length>t;t++){r=arguments[t];for(e in r)a[e]=r[e]}return a},function(){var r,a,n,o;(function(){var e={},t={};r=function(t,r,a){e[t]={deps:r,callback:a}},o=n=a=function(r){function n(e){if("."!==e.charAt(0))return e;for(var t=e.split("/"),a=r.split("/").slice(0,-1),n=0,o=t.length;o>n;n++){var i=t[n];if(".."===i)a.pop();else{if("."===i)continue;a.push(i)}}return a.join("/")}if(o._eak_seen=e,t[r])return t[r];if(t[r]={},!e[r])throw Error("Could not find module "+r);for(var i,s=e[r],c=s.deps,u=s.callback,f=[],p=0,l=c.length;l>p;p++)"exports"===c[p]?f.push(i={}):f.push(a(n(c[p])));var h=u.apply(this,f);return t[r]=i||h}})(),r("promise/all",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!a(e))throw new TypeError("You must pass an array to all.");return new t(function(t,r){function a(e){return function(t){o(e,t)}}function o(e,r){s[e]=r,0===--c&&t(s)}var i,s=[],c=e.length;0===c&&t([]);for(var u=0;e.length>u;u++)i=e[u],i&&n(i.then)?i.then(a(u),r):o(u,i)})}var a=e.isArray,n=e.isFunction;t.all=r}),r("promise/asap",["exports"],function(r){"use strict";function a(){return function(){process.nextTick(i)}}function n(){var e=0,t=new f(i),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function o(){return function(){p.setTimeout(i,1)}}function i(){for(var e=0;l.length>e;e++){var t=l[e],r=t[0],a=t[1];r(a)}l=[]}function s(e,t){var r=l.push([e,t]);1===r&&c()}var c,u=e!==t?e:{},f=u.MutationObserver||u.WebKitMutationObserver,p="undefined"!=typeof global?global:this,l=[];c="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?a():f?n():o(),r.asap=s}),r("promise/cast",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.cast=t}),r("promise/config",["exports"],function(e){"use strict";function r(e,r){return 2!==arguments.length?a[e]:(a[e]=r,t)}var a={instrument:!1};e.config=a,e.configure=r}),r("promise/polyfill",["./promise","./utils","exports"],function(t,r,a){"use strict";function n(){var t="Promise"in e&&"cast"in e.Promise&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),i(t)}();t||(e.Promise=o)}var o=t.Promise,i=r.isFunction;a.polyfill=n}),r("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(e,r,a,n,o,i,s,c,u){"use strict";function f(e){if(!G(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof f))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],p(e,this)}function p(e,t){function r(e){y(t,e)}function a(e){A(t,e)}try{e(r,a)}catch(n){a(n)}}function l(e,t,r,a){var n,o,i,s,c=G(r);if(c)try{n=r(a),i=!0}catch(u){s=!0,o=u}else n=a,i=!0;g(t,n)||(c&&i?y(t,n):s?A(t,o):e===P?y(t,n):e===T&&A(t,n))}function h(e,t,r,a){var n=e._subscribers,o=n.length;n[o]=t,n[o+P]=r,n[o+T]=a}function d(e,t){for(var r,a,n=e._subscribers,o=e._detail,i=0;n.length>i;i+=3)r=n[i],a=n[i+t],l(t,r,a,o);e._subscribers=null}function g(e,r){var a,n=null;try{if(e===r)throw new TypeError("A promises callback cannot return that same promise.");if(M(r)&&(n=r.then,G(n)))return n.call(r,function(n){return a?!0:(a=!0,r!==n?y(e,n):m(e,n),t)},function(r){return a?!0:(a=!0,A(e,r),t)}),!0}catch(o){return a?!0:(A(e,o),!0)}return!1}function y(e,t){e===t?m(e,t):g(e,t)||m(e,t)}function m(e,t){e._state===N&&(e._state=L,e._detail=t,b.async(D,e))}function A(e,t){e._state===N&&(e._state=L,e._detail=t,b.async(v,e))}function D(e){d(e,e._state=P)}function v(e){d(e,e._state=T)}var b=e.config;e.configure;var M=r.objectOrFunction,G=r.isFunction;r.now;var S=a.cast,w=n.all,I=o.race,x=i.resolve,E=s.reject,j=c.asap;b.async=j;var N=void 0,L=0,P=1,T=2;f.prototype={constructor:f,_state:t,_detail:t,_subscribers:t,then:function(e,t){var r=this,a=new this.constructor(function(){});if(this._state){var n=arguments;b.async(function(){l(r._state,a,n[r._state-1],r._detail)})}else h(this,a,e,t);return a},"catch":function(e){return this.then(null,e)}},f.all=w,f.cast=S,f.race=I,f.resolve=x,f.reject=E,u.Promise=f}),r("promise/race",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!a(e))throw new TypeError("You must pass an array to race.");return new t(function(t,r){for(var a,n=0;e.length>n;n++)a=e[n],a&&"function"==typeof a.then?a.then(t,r):t(a)})}var a=e.isArray;t.race=r}),r("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,r){r(e)})}e.reject=t}),r("promise/resolve",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t){t(e)})}e.resolve=t}),r("promise/utils",["exports"],function(e){"use strict";function t(e){return r(e)||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}var n=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=r,e.isArray=a,e.now=n}),a("promise/polyfill").polyfill()}(),AeroGear.DataManager=function(e){return this instanceof AeroGear.DataManager?(this.add=function(e){e=e||{};var t,r,a,n,o;e=Array.isArray(e)?e:[e],e=e.map(function(e){if(o=e.settings||{},a=o.fallback===!1?!1:!0,a&&(n=o.preferred?o.preferred:AeroGear.DataManager.preferred,"string"!=typeof e&&(r=e.type||"Memory",!(r in AeroGear.DataManager.validAdapters))))for(t=0;n.length>t;t++)if(n[t]in AeroGear.DataManager.validAdapters)return("IndexedDB"===r||"WebSQL"===r)&&(e.settings=AeroGear.extend(e.settings||{},{async:!0})),e.type=n[t],e;return e},this),AeroGear.Core.call(this),this.add(e),this.add=this._add},this._add=this.add,this.remove=function(e){AeroGear.Core.call(this),this.remove(e),this.remove=this._remove},this._remove=this.remove,this.lib="DataManager",this.type=e?e.type||"Memory":"Memory",this.collectionName="stores",this.add(e),t):new AeroGear.DataManager(e)},AeroGear.DataManager.prototype=AeroGear.Core,AeroGear.DataManager.constructor=AeroGear.DataManager,AeroGear.DataManager.validAdapters={},AeroGear.DataManager.preferred=["IndexedDB","WebSQL","SessionLocal","Memory"],AeroGear.DataManager.validateAdapter=function(e,t){t.isValid()&&(AeroGear.DataManager.validAdapters[e]=t)},AeroGear.DataManager.adapters={},AeroGear.DataManager.STATUS_NEW=1,AeroGear.DataManager.STATUS_MODIFIED=2,AeroGear.DataManager.STATUS_REMOVED=0,AeroGear.DataManager.adapters.base=function(t,r){if(this instanceof AeroGear.DataManager.adapters.base)throw"Invalid instantiation of base class AeroGear.DataManager.adapters.base";r=r||{};var a=null,n=r.recordId?r.recordId:"id",o=r.crypto||{},i=o.options||{};this.getData=function(){return a||[]},this.setData=function(e){a=e},this.getRecordId=function(){return n},this.encrypt=function(r){var a;return o.agcrypto?(i.data=sjcl.codec.utf8String.toBits(JSON.stringify(r)),a={id:r[n],data:o.agcrypto.encrypt(i)},e.localStorage.setItem("ag-"+t+"-IV",JSON.stringify({id:o.agcrypto.getIV()})),a):r},this.decrypt=function(r,a){var n,s;return o.agcrypto?(s=JSON.parse(e.localStorage.getItem("ag-"+t+"-IV"))||{},i.IV=s.id,r=Array.isArray(r)?r:[r],n=r.map(function(e){return i.data=e.data,JSON.parse(sjcl.codec.utf8String.fromBits(o.agcrypto.decrypt(i)))}),a?n[0]:n):r}},AeroGear.DataManager.adapters.Memory=function(e,r){return this instanceof AeroGear.DataManager.adapters.Memory?(AeroGear.DataManager.adapters.base.apply(this,arguments),this.emptyData=function(){this.setData(null)},this.addDataRecord=function(e){this.getData().push(e)},this.updateDataRecord=function(e,t){this.getData()[e]=t},this.removeDataRecord=function(e){this.getData().splice(e,1)},this.open=function(){return Promise.resolve()},this.close=function(){},this.traverseObjects=function(e,t,r){for(;"object"==typeof t&&r;)e=Object.keys(t)[0],t=t[e],r=r[e];return t===r?!0:!1},t):new AeroGear.DataManager.adapters.Memory(e,r)},AeroGear.DataManager.adapters.Memory.isValid=function(){return!0},AeroGear.DataManager.adapters.Memory.prototype.read=function(e){var t={};return t[this.getRecordId()]=e,e?this.filter(t).then(function(e){return e}):Promise.resolve(this.getData())},AeroGear.DataManager.adapters.Memory.prototype.save=function(e,t){var r=!1;if(e=Array.isArray(e)?e:[e],t&&t.reset)this.setData(e);else if(this.getData()&&0!==this.getData().length)for(var a=0;e.length>a;a++){for(var n in this.getData())if(this.getData()[n][this.getRecordId()]===e[a][this.getRecordId()]){this.updateDataRecord(n,e[a]),r=!0;break}r||this.addDataRecord(e[a]),r=!1}else this.setData(e);return Promise.resolve(this.getData())},AeroGear.DataManager.adapters.Memory.prototype.remove=function(e){var t,r,a;if(!e)return this.emptyData(),Promise.resolve(this.getData());e=Array.isArray(e)?e:[e];for(var n=0;e.length>n;n++){if("string"==typeof e[n]||"number"==typeof e[n])t=e[n];else{if(!e)continue;t=e[n][this.getRecordId()]}r=this.getData(!0);for(a in r)r[a][this.getRecordId()]===t&&this.removeDataRecord(a)}return Promise.resolve(this.getData())},AeroGear.DataManager.adapters.Memory.prototype.filter=function(e,t){var r,a,n,o,i=this;return e?(r=this.getData().filter(function(r){var s,c,u=t?!1:!0,f=Object.keys(e);for(a=0;f.length>a;a++){if(e[f[a]].data)for(s=e[f[a]],c=s.matchAny?!1:!0,n=0;s.data.length>n;n++)if(Array.isArray(r[f[a]]))if(r[f[a]].length){if(t||s.matchAny){for(o=0;r[f[a]].length>o;o++)if(s.data[n]===r[f[a]][o]){c=!0;break}}else if(r[f[a]].length!==s.data.length)c=!1;else for(o=0;r[f[a]].length>o;o++)if(s.data[o]!==r[f[a]][o]){c=!1;break}}else c=!1;else if("object"==typeof s.data[n]){if(s.matchAny&&i.traverseObjects(f[a],s.data[n],r[f[a]])){c=!0;break}if(!s.matchAny&&!i.traverseObjects(f[a],s.data[n],r[f[a]])){c=!1;break}}else{if(s.matchAny&&s.data[n]===r[f[a]]){c=!0;break}if(!s.matchAny&&s.data[n]!==r[f[a]]){c=!1;break}}else if(Array.isArray(r[f[a]]))if(c=t?!1:!0,r[f[a]].length)for(n=0;r[f[a]].length>n;n++){if(t&&e[f[a]]===r[f[a]][n]){c=!0;break}if(!t&&e[f[a]]!==r[f[a]][n]){c=!1;break}}else c=!1;else c="object"==typeof e[f[a]]?i.traverseObjects(f[a],e[f[a]],r[f[a]]):e[f[a]]===r[f[a]]?!0:!1;if(t&&c){u=!0;break}if(!t&&!c){u=!1;break}}return u}),Promise.resolve(r)):(r=this.getData()||[],Promise.resolve(r))},AeroGear.DataManager.validateAdapter("Memory",AeroGear.DataManager.adapters.Memory),AeroGear.DataManager.adapters.SessionLocal=function(t,r){if(!(this instanceof AeroGear.DataManager.adapters.SessionLocal))return new AeroGear.DataManager.adapters.SessionLocal(t,r);AeroGear.DataManager.adapters.Memory.apply(this,arguments);var a=r.storageType||"sessionStorage",n=t,o=document.location.pathname.replace(/[\/\.]/g,"-"),i=n+o,s=e[a].getItem(i),c=s?this.decrypt(JSON.parse(s),!0):null;c&&AeroGear.DataManager.adapters.Memory.prototype.save.call(this,c,!0),this.getStoreType=function(){return a},this.getStoreKey=function(){return i}},AeroGear.DataManager.adapters.SessionLocal.isValid=function(){try{return!(!e.localStorage||!e.sessionStorage)}catch(t){return!1}},AeroGear.DataManager.adapters.SessionLocal.prototype=Object.create(new AeroGear.DataManager.adapters.Memory,{save:{value:function(t,r){var a=this,n=r&&r.reset?r.reset:!1,o=e[this.getStoreType()].getItem(this.getStoreKey());return AeroGear.DataManager.adapters.Memory.prototype.save.apply(this,[arguments[0],{reset:n}]).then(function(t){try{e[a.getStoreType()].setItem(a.getStoreKey(),JSON.stringify(a.encrypt(t)))}catch(r){return o=o?JSON.parse(o):[],AeroGear.DataManager.adapters.Memory.prototype.save.apply(a,[o,{reset:n}]).then(function(){return Promise.reject()})}return t})},enumerable:!0,configurable:!0,writable:!0},remove:{value:function(){var t=this;return AeroGear.DataManager.adapters.Memory.prototype.remove.apply(this,arguments).then(function(r){e[t.getStoreType()].setItem(t.getStoreKey(),JSON.stringify(t.encrypt(r)))})},enumerable:!0,configurable:!0,writable:!0}}),AeroGear.DataManager.validateAdapter("SessionLocal",AeroGear.DataManager.adapters.SessionLocal),AeroGear.DataManager.adapters.IndexedDB=function(r,a){if(!e.indexedDB)throw"Your browser doesn't support IndexedDB";if(!(this instanceof AeroGear.DataManager.adapters.IndexedDB))return new AeroGear.DataManager.adapters.IndexedDB(r,a);AeroGear.DataManager.adapters.base.apply(this,arguments),a=a||{};var n,o=a.auto===t||a.auto?!0:!1;this.getDatabase=function(){return n},this.setDatabase=function(e){n=e},this.getStoreName=function(){return r},this.getAsync=function(){return!0},this.run=function(e){var t=this;if(n)e.call(this,n);else{if(!o)throw"Database not opened";this.open().then(function(r,a){if("error"===a)throw"Database not opened";e.call(t,n)})}}},AeroGear.DataManager.adapters.IndexedDB.isValid=function(){return!!e.indexedDB},AeroGear.DataManager.adapters.IndexedDB.prototype.open=function(){var t,r,a=this,n=this.getStoreName(),o=this.getRecordId();return new Promise(function(i,s){t=e.indexedDB.open(n),t.onsuccess=function(e){r=e.target.result,a.setDatabase(r),i(r)},t.onerror=function(e){s(e)},t.onupgradeneeded=function(e){r=e.target.result,r.createObjectStore(n,{keyPath:o})}})},AeroGear.DataManager.adapters.IndexedDB.prototype.read=function(e){var r,a,n,o,i=this,s=[],c=this.getStoreName();return new Promise(function(u,f){i.run.call(i,function(p){return p.objectStoreNames.contains(c)?(r=p.transaction(c),a=r.objectStore(c),e?(o=a.get(e),o.onsuccess=function(){s.push(o.result)}):(n=a.openCursor(),n.onsuccess=function(e){var t=e.target.result;t&&(s.push(t.value),t.continue())}),r.oncomplete=function(){u(i.decrypt(s))},r.onerror=function(e){f(e)},t):u([])})})},AeroGear.DataManager.adapters.IndexedDB.prototype.save=function(e,t){t=t||{};var r,a,n=this,o=this.getStoreName(),i=0;return new Promise(function(s,c){n.run.call(n,function(u){if(r=u.transaction(o,"readwrite"),a=r.objectStore(o),t.reset&&a.clear(),Array.isArray(e))for(i;e.length>i;i++)a.put(this.encrypt(e[i]));else a.put(this.encrypt(e));r.oncomplete=function(){n.read().then(function(e){s(e)}).catch(function(){c(e,status)})},r.onerror=function(e){c(e)}})})},AeroGear.DataManager.adapters.IndexedDB.prototype.remove=function(e){var t,r,a=this,n=this.getDatabase(),o=this.getStoreName(),i=0;return new Promise(function(s,c){a.run.call(a,function(){if(r=n.transaction(o,"readwrite"),t=r.objectStore(o),e)for(e=Array.isArray(e)?e:[e],i;e.length>i;i++)if("string"==typeof e[i]||"number"==typeof e[i])t.delete(e[i]);else{if(!e)continue;t.delete(e[i][this.getRecordId()])}else t.clear();r.oncomplete=function(){a.read().then(function(e){s(e)}).catch(function(e){c(e)})},r.onerror=function(e){c(e)}})})},AeroGear.DataManager.adapters.IndexedDB.prototype.filter=function(e,t){var r=this;return new Promise(function(a,n){r.run.call(r,function(){this.read().then(function(n){AeroGear.DataManager.adapters.Memory.prototype.save.call(r,n,!0),AeroGear.DataManager.adapters.Memory.prototype.filter.call(r,e,t).then(function(e){a(e)})}).catch(function(e){n(e)})})})},AeroGear.DataManager.adapters.IndexedDB.prototype.close=function(){var e=this.getDatabase();e&&e.close()},AeroGear.DataManager.validateAdapter("IndexedDB",AeroGear.DataManager.adapters.IndexedDB),AeroGear.DataManager.adapters.WebSQL=function(r,a){if(!e.openDatabase)throw"Your browser doesn't support WebSQL";if(!(this instanceof AeroGear.DataManager.adapters.WebSQL))return new AeroGear.DataManager.adapters.WebSQL(r,a);AeroGear.DataManager.adapters.base.apply(this,arguments),a=a||{};var n,o=a.auto===t||a.auto?!0:!1;this.getDatabase=function(){return n},this.setDatabase=function(e){n=e},this.getStoreName=function(){return r},this.getAsync=function(){return!0},this.run=function(e){var t=this;if(n)e.call(this,n);else{if(!o)throw"Database not opened";this.open().then(function(){e.call(t,n)}).catch(function(){throw"Database not opened"})}}},AeroGear.DataManager.adapters.WebSQL.isValid=function(){return!!e.openDatabase},AeroGear.DataManager.adapters.WebSQL.prototype.open=function(){var t,r,a,n=this,o="1",i=2097152,s=this.getRecordId(),c=this.getStoreName();return t=e.openDatabase(c,o,"AeroGear WebSQL Store",i),new Promise(function(e,o){a=function(e,t){o(t)},r=function(){n.setDatabase(t),e(t)},t.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS '"+c+"' ( "+s+" REAL UNIQUE, json)",[],r,a)})})},AeroGear.DataManager.adapters.WebSQL.prototype.close=function(){},AeroGear.DataManager.adapters.WebSQL.prototype.read=function(e){var t,r,a,n=this,o=[],i=[],s=this.getStoreName(),c=this.getDatabase(),u=0;return new Promise(function(f,p){n.run.call(n,function(){a=function(e,t){p(t)},r=function(e,t){var r=t.rows.length;for(u;r>u;u++)o.push(JSON.parse(t.rows.item(u).json));f(n.decrypt(o))},t="SELECT * FROM '"+s+"'",e&&(t+=" WHERE ID = ?",i=[e]),c.transaction(function(e){e.executeSql(t,i,r,a)})})})},AeroGear.DataManager.adapters.WebSQL.prototype.save=function(e,t){t=t||{};var r,a,n=this,o=this.getRecordId(),i=this.getStoreName();return new Promise(function(s,c){n.run.call(n,function(u){r=function(e,t){c(t)},a=function(){n.read().then(function(e){s(e)}).catch(function(e){c(e)})},e=Array.isArray(e)?e:[e],u.transaction(function(r){t.reset&&(r.executeSql("DROP TABLE "+i),r.executeSql("CREATE TABLE IF NOT EXISTS '"+i+"' ( "+o+" REAL UNIQUE, json)")),e.forEach(function(e){e=n.encrypt(e),r.executeSql("INSERT OR REPLACE INTO '"+i+"' ( id, json ) VALUES ( ?, ? ) ",[e[o],JSON.stringify(e)])})},r,a)})})},AeroGear.DataManager.adapters.WebSQL.prototype.remove=function(e){var t,r,a,n=this,o=this.getStoreName(),i=0;return new Promise(function(s,c){n.run.call(n,function(u){a=function(e,t){c(t)},r=function(){n.read().then(function(e){s(e)}).catch(function(e){c(e)})},t="DELETE FROM '"+o+"'",e?(e=Array.isArray(e)?e:[e],u.transaction(function(r){for(i;e.length>i;i++)if("string"==typeof e[i]||"number"==typeof e[i])r.executeSql(t+" WHERE ID = ? ",[e[i]]);else{if(!e)continue;r.executeSql(t+" WHERE ID = ? ",[e[i][this.getRecordId()]])}},a,r)):u.transaction(function(e){e.executeSql(t,[],r,a)})})})},AeroGear.DataManager.adapters.WebSQL.prototype.filter=function(e,t){var r=this;return new Promise(function(a,n){r.run.call(r,function(){this.read().then(function(n){AeroGear.DataManager.adapters.Memory.prototype.save.call(r,n,!0),AeroGear.DataManager.adapters.Memory.prototype.filter.call(r,e,t).then(function(e){a(e)})}).catch(function(e){n(e)})})})},AeroGear.DataManager.validateAdapter("WebSQL",AeroGear.DataManager.adapters.WebSQL)})(this);
//@ sourceMappingURL=aerogear.js.map
